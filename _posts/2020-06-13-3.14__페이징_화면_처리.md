---
title: 3.14 페이징 화면 차리
categories: TIL
tags: [spring, jsp,pagination]
---





#### 페이지를 보여주는 작업

* 브라우저 주소창에서 페이지 번호를 전달해서 결과를 확인하는 단계
* JSP에서 페이지 번호를 출력하는 단계
* 각 페이지 번호에 클릭 이벤트 처리
* 전체 데이터 개수를 반영해서 페이지 번호 조절



**페이징 처리할 때 필요한 정보들**

* 현재 페이지 번호(page)
* 이전과 다음으로 이동 가능한 링크의 표시 여부(prev, next)
* 화면에서 보여지는 페이지의 시작 번호와 끝 번호(startPage, endPage)



#### 끝 페이지 번호와 시작 페이지 번호

페이징 처리 시 우선적으로 핑료한 정보는 현재 사용자가 보고 있는 페이지의 정보

페이지를 계산할 때 끝 번호를 먼저 계산 해두는 것이 수월하다.

**페이징의 끝 번호 계산**

```java
this.endPage = (int)(Math.ceil(페이지번호/10.0)) * 10;
```

페이징의 시작 번호 계산

```java
this.startPage = this.endPage - 9;
```



끝 번호는 전체 데이터 수에 영향을 받는다.

만약 끝 번호와 한 페이지당 데이터 수의 곱이 전체 데이터의 수보다 크다면 끝 번호는 다시 total을 이용해서 계산되어야한다.



**total로 endPage 재계산**

```java
realEnd = (int) (Math.ceil((total*1.0)/amount));

if(realEnd < this.endPage) {
    this.endPage = realEnd;
}
```



#### 이전과 다음

**이전 계산**

```java
this.prev = this.startPage > 1;
```

다음 계산

```java
this.next = this.endPage < realEnd;
```





**페이징 처리를 위한 클래스 설계**

화면에 페이징 처리를 위해서 여러 정보가 필요하다면 클래스를 구성해서 처리하는 방식도 꽤 편하다.

클래스를 구성하면 JSP 화면에 전달할 때도 객체를 생성해서 Model에 담아 보내느 과정이 단순해지는 장점이 있다.

**페이지 번호 이벤트 처리**

직접 링크를 처리하는 방식은 검색 조건이 붙고 난 후에 처리가 복잡하게 된다. 따라서 JavaScript를 통해 처리하는 방식을 이용한다.

a 태그의 href에는 게시물의 bno를 넣는다.



#### 조회 페이지로 이동

게시글 조회 후 목록으로 이동해보면 무조건 1페이지로 이동하는 문제

조회 페이지로 이동 시 pageNum과 amount를 같이 전달해야 한다.



a 태그로 복잡한 링크를 생성하는 방식이 나쁘지는 않다.

대표적인 예로 검색엔진에서는 출력된 정보와 링크를 저장해서 사용하기 때문에 a 태그 내의 링크가 완전한 url인 경우가 노출에 유리하다.

**만약 웹페이지가 검색엔진에 의해서 노출이 필요한 경우라면 직접 모든 문자열을 구성해주는 방식이 더 좋다.**



**방법**

form의 hidden 타입의 input에 pageNum과 amount를 담아 조회 수정 페이지에 전달한다.

