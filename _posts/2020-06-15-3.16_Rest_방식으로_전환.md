---
title: 3.16 Rest 방식으로 전환
categories: TIL
tags: [spring, REST]
---



모바일 시대가 되면서 WEB 분야의 가장 큰 변화는 서버 역할의 변화

과거에는 **서버의 데이터를 소비하는 주체가 '브라우저'**라는 특정한 애플리케이션으로 제한적이었다면,
모바일의 시대가 되면서 앱이나 웹은 **서버에서 제공하는 데이터를 소비**하게 된다.

스마트폰에서는 앱이라는 고유한 애플리케이션을 이용해서 데이터를 소비하고 보이는 화면 역시 자신만의 방식으로 서비스하게 된다.
따라서 서버의 역할은 점점 더 순수하게 데이터에 대한 처리를 목적으로 하는 형태로 진화하고 있다.
또한, 브라우저와 앱은 서버에서 전달하는 데이터를 이용해서 앱 혹은 브라우저 내부에서 별도의 방식을 통해 이를 소비하는 형태로 전환하고 있다.



과거 웹페이지들은 페이지를 이동하더라도 브라우저의 주소는 변하지 않는 방식을 선호했지만 최근의 웹페이지들은 대부분 페이지를 이동하면 브라우저 내의 주소 역시 같이 이동하는 방식을 선호

REST는 'Representational State Transfer'의 약어로 **하나의 URI는 하나의 고유한 리소스를 대표**하도록 설계된다는 개념에 **전송방식을 결합해서 원하는 작업을 지정**합니다.

예를들어 '/board/123'은 게시물 중 123번이라는 **고유한 의미**를 가지도록 설계하고 이에 대한 처리는 GET, POST와 같이 추가적인 정보를 통해 결정한다.



**REST 관련 스프링 어노테이션**

| 어노테이션      | 기능                                                         |
| --------------- | ------------------------------------------------------------ |
| @RestController | Controller가 REST방식을 처리하기 위한 것임을 명시            |
| @ResponseBody   | 일반적인 JSP와 같은 뷰로 전달되는 게 아니라 데이터 자체를 전달하기 위한 용도 |
| @PathVariable   | URL 경로에 있는 값을 파라미터로 추출하려고 할 때 사용        |
| @CrossOrigin    | Ajax의 크로스 도메인 문제를 해결해주는 어노테이션            |
| @RequestBody    | JSON 데이터를 원하는 타입으로 바인딩 처리                    |



**JSON**

JavaScript Object Notation의 약어로 구조가 있는 데이터를 '{}'로 묶고 '키'와 '값'으로 구성하는 경량의 데이터 포맷



**RestController의 반환 타입**

* 단순 문자열
* 객체
* 컬렉션 타입의 객체 (배열, 리스트, 맵)
* ResponseEntity
  * 데이터와 함께 HTTP 헤더의 상태 메세지 등을 같이 전달하는 용도로 사용



**RestController에서 파라미터**

기존의 Controller에서 사용하던 일반적인 타입이나 사용자가 정의한 타입을 사용.

추가적으로 몇 가지 어노테이션을 이용.

* @PathVariable: 일반 컨트롤러에서도 사용이 가능하지만 REST 방식에서 자주 사용.
  URL 경로의 일부를 파라미터로 사용할 때 이용
* @RequestBody: JSON 데이터를 원하는 타입의 객체로 변환해야하는 경우에 주로 사용



**@PathVariable**

REST 방식에서는 URL 내에 최대한 많은 정보를 담으려한다.

쿼리 스트링 형태로 파라미터를 이용해서 전달되던 데이터들이 REST 방식에서는 경로의 일부로 차용되는 경우가 많다.

URL에서 {}로 처리된 부분은 컨트롤러의 메서드에서 변수로 처리가 가능
@PathVariable은 {}의 이름을 처리할 때 사용



**@RequestBody**

전달된 요청(request)의 내용(body)를 이용해서 해당 파라미터의 타입으로 변환을 요구
내부적으로 HttpMessageConverter 타입의 객체들을 이용해서 다양한 포맷의 입력 데이터를 변환할 수 있다.

대부분의 경우에는 JSON 데이터를 서버에 보내서 원하는 타입의 객체로 변환하는 용도로 사용되지만, 경우에 따라서는 원하는 포맷의 데이터를 보내고, 이를 해석해서 원하는 타입으로 사용하기도 한다.



**다양한 전송 방식**

| 작업   | 전송 방식 |
| ------ | --------- |
| Create | POST      |
| Read   | GET       |
| Update | PUT       |
| Delete | DELETE    |



| 작업 | 전송 방식 | URI                                |
| ---- | --------- | ---------------------------------- |
| 등록 | POST      | /members/new                       |
| 조회 | GET       | /members/{id}                      |
| 수정 | PUT       | /members/{id}+body(json 데이터 등) |
| 삭제 | DELETE    | /members/{id}                      |

