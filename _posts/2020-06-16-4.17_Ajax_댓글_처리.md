---
title: 4.17 Ajax 댓글 처리
categories: TIL
tags: [spring, REST, ajax]
---



REST 방식을 가장 많이 사용하는 형태는 Ajax를 이용해서 호출하는 것

데이터베이스에서 댓글은 전형적인 1:N관계로 구성

하나의 게시물에 여러 개의 댓글을 추가하는 형태로 구성하고, 화면은 조회 화면 상에서 **별도의 화면 이동 없이 처리하기 때문에 Ajax를 이용**해서 호출



댓글의 목록과 페이징 처리는 기존 게시물 페이징 처리와 유사하지만 추가적으로 특정한 게시물의 댓글들만 대상으로 하기 때문에 게시물의 번호가 추가로 필요하다.



**MyBatis에서 두 개 이상의 데이터를 파라미터로 전달하는 방법**

* 별도의 객체로 구성
* Map 이용
* @Param을 이용해서 이름을 사용하는 방식



**ReplyController**

| 작업   | URL                       | HTTP 전송방식 |
| ------ | ------------------------- | ------------- |
| 등록   | /replies/new              | POST          |
| 조회   | /replies/:rno             | GET           |
| 삭제   | /replies/:rno             | DELETE        |
| 수정   | /replies/:rno             | PUT or PATCH  |
| 페이지 | /replies/pages/:bno/:page | GET           |

REST 방식으로 동작하는 URL을 설계할 때는 **PK를 기준으로 작성**하는 것이 좋다.

@RequestBody로 처리되는 데이터는 일반 파라미터나 @PathVariable 파라미터를 처리할 수 없다.



**JavaScript의 모듈화**

JavaScript에서 가장 많이 사용하는 패턴 중 하나는 모듈 패턴

모듈 패턴은 관련 있는 함수들을 하나의 모듈처럼 묶음으로 구성

가장 대표적인 방법으로 JavaScript의 클로저 이용이 있다.



**모듈 구성하기**

모듈 패턴은쉽게 말해서 Java의 클래스처럼 JavaScript를 이용해서 메서드를 가지는 객체를 구성

모듈 패턴은 JavaScript의 즉시 실행함수와 '{}'를 이용해서 객체를구성

